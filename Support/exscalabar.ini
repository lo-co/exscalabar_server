; This is the configuration file for the EXSCALABAR instrument.
; Author: M. Richardson
; Initial Creation: 20 August 2014


; Last Revision
; =============
; Date: 20 August 2014
; Author: M. Richardson

; NOTE: SERIAL CONFIGURATION
; ==========================
; Each serial device has a similar set of configuration parameters.  The
; definition of these parameters is as follows:
; PORT: communication port that the device is talking on.  This can be \
; configured via MAX.
; BAUD RATE: rate of data transfer in bits per second.
; DATA BITS: number of data bits in packet
; STOP BITS: Number of bits in packet to indicate completion of packet transmission.
;            Value is 1 (10), 2 (20), etc.
; PARITY: Device parity; even = 0, odd = 1, even = 2, ....
;

; The following section defines the behavior of pressure calibrations.
; Pressure will run both up and down from Pcurrent-25 to Pmin.
; The pressure will change through Nsteps, evenly divided, and will
; remain at a pressure for a period of twait seconds.
[PPT]
Port = COM5
Serial Config.baud rate = 28800
Serial Config.data bits = 8
Serial Config.stop bits = 10
Serial Config.parity = 0
Serial Config.flow control = 0
Serial Config.endModeforReads = 2
Serial Config.endModeforWrites = 2
Msg Config.sendEndEn = TRUE
Msg Config.suppEnEnRd = FALSE
Msg Config.termChar = 13
Msg Config.EnTermChar = TRUE
IDs = pDryBlue
pDryBlue.address = 1
Units = mbar
Nsteps = 10
Pmin = 200
twait = 30

[Alicat]
Port = COM1
Serial Config.baud rate = 38400
Serial Config.data bits = 8
Serial Config.stop bits = 10
Serial Config.parity = 0
Serial Config.flow control = 0
Serial Config.endModeforReads = 2
Serial Config.endModeforWrites = 2
Msg Config.sendEndEn = TRUE
Msg Config.suppEnEnRd = FALSE
Msg Config.termChar = 13
Msg Config.EnTermChar = TRUE
IDs = TestAlicat
TestAlicat.Address = J
TestAlicat.Q0 = 1

[Filter]
; filter position
fpos = TRUE
; time in seconds between the start of a filter
period = 240
; length in seconds of filter
length = 60
; auto_cycle? determines whether the system will automatically cycle between
; filter and sample at startup.
auto_cycle? = FALSE

; The following section defines the parameters that determine ho the
; CRDS behaves in the system.  There are five cells and they are defined as per
; Fig 1 in the Software Specifications
[CRDS]
writeRD = TRUE
flaser = 1000,2000
dc = 0.5,0.5
Coadd = 1,1,1,1,1
lambda = 660,405,405,405,405
ncells = 5
; Initial RH setpoints; these refer to cells 2 and 5 respectively
RH = 90, 70
; Optical lengths of cavities
lcell = 1,1,1,1,1
expFit = LRS,LRS,LRS,LRS,LRS
kpmt = 1,1,1,1,1
kred = 1
kblue0 = 1
kblue1 = 1
Cell_0.T = pDryBlue
Cell_0.P = pDryBlue
Cell_0.Q = TestAlicat
Cell_1.T = vDryBlue
Cell_1.P = TestAlicat
Cell_1.Q = TestAlicat
Cell_2.T = vDryBlue
Cell_2.P = TestAlicat
Cell_2.Q = TestAlicat
Cell_3.T = vDryRed
Cell_3.P = TestAlicat
Cell_3.Q = TestAlicat
Cell_4.T = vDryRed
Cell_4.P = TestAlicat
Cell_4.Q = TestAlicat

; Section defining initial PAS behavior.  According to Fig 1 in Software
; Specifications, there are 5 cells.

[PAS]
ncells = 5
m = 1,1,1,1,1
b = 0,0,0,0,0
TEC.T0 = 21,21,21,21,21
TEC.En = TRUE, TRUE, TRUE, TRUE, TRUE
chirp.center = 1350
chirp.band = 100
# Speaker is set to autocycle, switching every 5 minutes
# and is on for 20 s.
spk.cycle = TRUE
spk.period = 300
spk.length = 20
spk.enabled = TRUE
spk.ienabled = TRUE, TRUE, TRUE, TRUE, TRUE
spk.vrange = 5
spk.voffset = 0
las.vrange = 5,5,5,5,5
las.offset = 2.5,2.5,2.5,2.5,2.5
las.f0 = 1000,1000,1000,1000,1000
las.mod = Sine,Sine,Sine,Sine,Sine
las.en = TRUE, TRUE, TRUE, TRUE, TRUE
serializeWF = FALSE

; This is for the TEC which will be communicating on an RS485
; connection
[TEC]
T0 = 18
Port = COM2
Serial Config.baud rate = 19200
Serial Config.data bits = 8
Serial Config.stop bits = 10
Serial Config.parity = 0
Serial Config.flow control = 0
Serial Config.endModeforReads = 2
Serial Config.endModeforWrites = 2
Msg Config.sendEndEn = TRUE
Msg Config.suppEnEnRd = FALSE
Msg Config.termChar = 13
Msg Config.EnTermChar = TRUE
P = 1
I = 0.75
D = 0

[Meerstetter]
Port = COM4
Serial Config.baud rate = 57600
Serial Config.data bits = 8
Serial Config.stop bits = 10
Serial Config.parity = 0
Serial Config.flow control = 0
Serial Config.endModeforReads = 2
Serial Config.endModeforWrites = 2
Msg Config.sendEndEn = TRUE
Msg Config.suppEnEnRd = FALSE
Msg Config.termChar = 13
Msg Config.EnTermChar = TRUE
IDs = hTEC
; We can control on Power or Temperature.
; If the control is set to power, then we
; will read in the V and I settings prior to
; operation.  Otherwise, we will read in T.
hTEC.ctl = Power
; Temperature in degrees Celsius
hTEC.T = 15
; Control voltage in volts
hTEC.V = 0
; Control current in amps
hTEC.I = 0
hTEC.address = 2




; For Vaisala probes HMP60's, these are on a multidrop network.
; They will be talking over a RS485 port.
[Vaisala]
Port = COM3
Serial Config.baud rate = 57600
Serial Config.data bits = 8
Serial Config.stop bits = 10
Serial Config.parity = 0
Serial Config.flow control = 0
Serial Config.endModeforReads = 2
Serial Config.endModeforWrites = 2
Msg Config.sendEndEn = TRUE
Msg Config.suppEnEnRd = TRUE
Msg Config.termChar = 13
Msg Config.EnTermChar = TRUE
IDs = vDryBlue,vDryRed
vDryBlue.Address = 1
vDryRed.Address = 2


[MainFile]
; NOT IMPLEMENTED
f = 1
folder = exscalabar\Data
Main.Path = u:\
; Empty string indicates that data will not be mirrored.
Mirror.Path = v:\
; added to the beginning of a file name
prefix = test_
; file extension (should be .txt for text files - default)
ext = .txt
Save? = TRUE
; Maximum file size before a new file is opened for writing (in Mb)
max_file_size = 10

; Entries for handling the aircraft network
[AC Network]
; Network address to listen on
address = 239.1.4.6
port = 50001
; Will not launch if active? is FALSE
active?=TRUE
file=c:\exscalabar\packet.xml

[General]
;Solenoid positions	Boolean	Initial solenoid valve positions.  TRUE = open, FALSE = closed.
; If set to true, sample from the cabin; otherwise sample from the inlet
inlet = TRUE

[Power]
denuder = FALSE
laser = TRUE
ozone = FALSE
pump = TRUE
TEC = TRUE

[Log]
Log Warnings = TRUE
; If you don't want to ignore any codes, set this value to 0.  Otherwise, use
; a comma separated list of integers
Ignore Codes = 0,1073676293,-1073807252,85
